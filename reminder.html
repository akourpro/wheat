<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>تذكير بالدعاء للميت</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-gradient: radial-gradient(circle at top, #f5f8ff 0%, #eef1ff 36%, #e3ecff 100%);
      --card-bg: rgba(255, 255, 255, 0.9);
      --accent: #3b82f6;
      --accent-soft: #dbeafe;
      --accent-strong: #1d4ed8;
      --text-main: #1f2937;
      --text-muted: #6b7280;
      --border-light: rgba(148, 163, 184, 0.25);
      --shadow-soft: 0 30px 60px rgba(15, 23, 42, 0.08);
      --transition: 220ms ease;
      color-scheme: light;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Cairo", "Tahoma", sans-serif;
      background: var(--bg-gradient);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(24px, 5vw, 48px);
      position: relative;
      overflow: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      width: clamp(220px, 30vw, 360px);
      height: clamp(220px, 30vw, 360px);
      background:
        radial-gradient(circle at center, rgba(59, 130, 246, 0.14) 0%, rgba(59, 130, 246, 0.04) 70%, transparent 100%),
        conic-gradient(from 45deg, rgba(15, 23, 42, 0.08) 0 25%, transparent 25% 50%, rgba(15, 23, 42, 0.08) 50% 75%, transparent 75% 100%);
      mask: repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.5) 0 10px, transparent 10px 20px);
      opacity: 0.6;
      pointer-events: none;
      z-index: 0;
    }

    body::before {
      top: -120px;
      right: -90px;
      transform: rotate(18deg);
    }

    body::after {
      bottom: -140px;
      left: -100px;
      transform: rotate(-12deg);
    }

    .page {
      width: min(960px, 100%);
      display: grid;
      gap: 32px;
      position: relative;
      z-index: 1;
    }

    .hero {
      text-align: center;
      display: grid;
      gap: 12px;
      position: relative;
      padding-bottom: 16px;
    }

    .hero::after {
      content: "";
      width: clamp(120px, 20vw, 180px);
      height: 14px;
      margin: 12px auto 0;
      background:
        radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.8) 0 35%, transparent 60%),
        radial-gradient(circle at 80% 50%, rgba(59, 130, 246, 0.8) 0 35%, transparent 60%),
        linear-gradient(90deg, rgba(59, 130, 246, 0.55), rgba(37, 99, 235, 0.65));
      mask: repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.9) 0 18px, transparent 18px 24px);
      opacity: 0.9;
    }

    .hero .eyebrow {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 4px 14px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.12);
      color: var(--accent-strong);
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }

    .hero .eyebrow::before {
      content: "";
      width: 14px;
      height: 14px;
      background: rgba(37, 99, 235, 0.8);
      clip-path: polygon(50% 0%, 63% 35%, 98% 35%, 69% 56%, 79% 91%, 50% 72%, 21% 91%, 31% 56%, 2% 35%, 37% 35%);
      opacity: 0.75;
    }

    .hero .eyebrow::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent, rgba(59, 130, 246, 0.15));
      opacity: 0.6;
    }

    .hero h1 {
      margin: 0;
      font-size: clamp(28px, 5vw, 40px);
      font-weight: 700;
      color: #0f172a;
    }

    .hero p {
      margin: 0;
      font-size: 18px;
      color: var(--text-muted);
      line-height: 1.7;
    }

    .content {
      display: grid;
      gap: 24px;
    }

    @media (min-width: 900px) {
      .content {
        grid-template-columns: minmax(0, 1.05fr) minmax(0, 0.95fr);
        gap: 28px;
      }
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-light);
      border-radius: 22px;
      padding: clamp(24px, 3vw, 32px);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(12px);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        repeating-linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0 14px, transparent 14px 28px),
        radial-gradient(circle at top right, rgba(59, 130, 246, 0.12), transparent 60%);
      opacity: 0.7;
      pointer-events: none;
      z-index: 0;
    }

    .card::after {
      content: "";
      position: absolute;
      width: 68px;
      height: 68px;
      inset-block-start: -24px;
      inset-inline-end: -10px;
      background: radial-gradient(circle at center, rgba(59, 130, 246, 0.18) 0 40%, transparent 70%),
        radial-gradient(circle at center, rgba(37, 99, 235, 0.25) 0 20%, transparent 50%);
      clip-path: polygon(50% 0%, 63% 35%, 100% 35%, 72% 57%, 82% 100%, 50% 78%, 18% 100%, 28% 57%, 0% 35%, 37% 35%);
      opacity: 0.45;
      pointer-events: none;
      z-index: 0;
    }

    .card > * {
      position: relative;
      z-index: 1;
    }

    .card h2 {
      margin: 0 0 18px;
      font-size: 22px;
      font-weight: 700;
      color: #0f172a;
    }

    form {
      display: grid;
      gap: 20px;
    }

    .field {
      display: grid;
      gap: 8px;
    }

    label,
    legend {
      font-weight: 600;
      font-size: 16px;
      color: #0f172a;
    }

    input[type="text"],
    input[type="tel"] {
      font: inherit;
      padding: 14px 16px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background-color: rgba(255, 255, 255, 0.9);
      transition: border-color var(--transition), box-shadow var(--transition);
      direction: ltr;
      letter-spacing: 0.3px;
    }

    select {
      font: inherit;
      padding: 14px 16px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background-color: rgba(255, 255, 255, 0.9);
      transition: border-color var(--transition), box-shadow var(--transition);
      cursor: pointer;
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, rgba(59, 130, 246, 0.7) 50%), linear-gradient(135deg, rgba(59, 130, 246, 0.7) 50%, transparent 50%);
      background-position: calc(100% - 24px) calc(50% - 3px), calc(100% - 18px) calc(50% - 3px);
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
      text-align: right;
      direction: rtl;
    }

    input[type="text"]:focus,
    input[type="tel"]:focus,
    select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
    }

    fieldset {
      margin: 0;
      padding: 18px 18px 14px;
      border: 1px dashed rgba(59, 130, 246, 0.35);
      border-radius: 18px;
      background: rgba(59, 130, 246, 0.05);
      display: grid;
      gap: 12px;
    }

    .methods {
      display: grid;
      gap: 10px;
    }

    .contact-input {
      display: grid;
      gap: 12px;
    }

    @media (min-width: 600px) {
      .contact-input {
        grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
      }
    }

    .field-hint {
      margin: 0;
      font-size: 13px;
      color: rgba(15, 23, 42, 0.6);
    }

    .method-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid transparent;
      transition: background-color var(--transition), border-color var(--transition), transform var(--transition);
      cursor: pointer;
    }

    .method-option input {
      accent-color: var(--accent-strong);
      width: 18px;
      height: 18px;
    }

    .method-option .option-body {
      display: grid;
      gap: 4px;
    }

    .method-option .label {
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .method-option .hint {
      font-size: 14px;
      color: var(--text-muted);
    }

    .method-option:is(:hover, :focus-within) {
      background: rgba(59, 130, 246, 0.08);
    }

    .method-option input:checked + .option-body {
      color: var(--accent-strong);
    }

    .method-option input:checked ~ .icon {
      transform: scale(1.05);
    }

    .method-option input:checked {
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.22);
    }

    .method-option input:checked + .option-body .label {
      color: var(--accent-strong);
    }

    .method-option input:checked + .option-body .hint {
      color: var(--accent-strong);
    }

    .contact-field[hidden] {
      display: none;
    }

    .button-row {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 12px;
    }

    button {
      font: inherit;
      font-weight: 700;
      padding: 16px 20px;
      border-radius: 14px;
      border: none;
      color: #fff;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition);
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 15px 30px rgba(37, 99, 235, 0.25);
    }

    button:active {
      transform: translateY(0);
    }

    .privacy-note {
      margin: 0;
      font-size: 14px;
      color: var(--text-muted);
      text-align: center;
    }

    .success-message {
      margin: 0;
      text-align: center;
      font-weight: 600;
      color: #15803d;
      background: rgba(187, 247, 208, 0.6);
      border-radius: 12px;
      padding: 12px;
      border: 1px solid rgba(22, 163, 74, 0.3);
      display: none;
    }

    .success-message.visible {
      display: block;
    }

    .preview-card {
      display: grid;
      gap: 16px;
      transition: transform 260ms ease, opacity 260ms ease;
      opacity: 0;
      transform: translateY(18px);
    }

    .preview-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .preview-card .preview-body {
      padding: 18px;
      border-radius: 18px;
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.04));
      border: 1px solid rgba(59, 130, 246, 0.25);
      color: #0f172a;
      line-height: 1.8;
      font-size: 16px;
    }

    .preview-card .contact-hint {
      margin: 0;
      font-size: 14px;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tips {
      display: grid;
      gap: 12px;
      margin-top: 12px;
    }

    .tip {
      display: grid;
      gap: 6px;
      padding: 14px;
      border-radius: 16px;
      background: rgba(148, 163, 184, 0.12);
      border: 1px solid rgba(148, 163, 184, 0.16);
    }

    .tip strong {
      color: #0f172a;
    }

    @media (max-width: 600px) {
      fieldset {
        gap: 14px;
      }

      .method-option {
        align-items: flex-start;
      }

      .method-option input {
        margin-top: 6px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="hero">
      <span class="eyebrow">رحمة وذكرى</span>
      <h1>ذكّر محبيك بالدعاء للميت العزيز على قلبك</h1>
      <p>أنشئ تذكيراً شخصياً يذكّر الأهل والأصدقاء بالدعاء بالرحمة والمغفرة، واختر قناة الإرسال التي تناسبهم.</p>
    </header>

    <main class="content">
      <section class="card">
        <h2>بيانات التذكير</h2>
        <form id="reminderForm" novalidate>
          <div class="field">
            <label for="deceasedName">اسم الميت</label>
            <input id="deceasedName" name="deceasedName" type="text" placeholder="مثال: الحاج محمد بن أحمد" required>
          </div>

          <fieldset>
            <legend>طريقة التذكير</legend>
            <div class="methods">
              <label class="method-option">
                <input type="radio" name="reminderMethod" value="whatsapp" checked>
                <span class="option-body">
                  <span class="label">واتساب</span>
                  <span class="hint">إرسال رسالة دعاء عبر رقم الهاتف.</span>
                </span>
              </label>

              <label class="method-option">
                <input type="radio" name="reminderMethod" value="telegram">
                <span class="option-body">
                  <span class="label">تيليجرام</span>
                  <span class="hint">إرسال الرسالة عبر اسم المستخدم في تيليجرام.</span>
                </span>
              </label>
            </div>
          </fieldset>

          <div class="field contact-field" data-method="whatsapp">
            <label for="whatsappNumber">رقم واتساب</label>
            <div class="contact-input">
              <select id="countryCode" name="countryCode">
                <option value="" disabled selected>جاري تحديد الدولة...</option>
              </select>
              <input id="whatsappNumber" name="whatsappNumber" type="tel" inputmode="tel" autocomplete="tel" placeholder="مثال: +966 5XXXXXXX">
            </div>
            <p class="field-hint">سيتم التعرف على الرمز الدولي تلقائياً، ويمكن تغييره يدوياً عند الحاجة.</p>
          </div>

          <div class="field contact-field" data-method="telegram" hidden>
            <label for="telegramUsername">اسم المستخدم في تيليجرام</label>
            <input id="telegramUsername" name="telegramUsername" type="text" placeholder="مثال: @username" dir="ltr" autocomplete="off">
          </div>

          <div class="button-row">
            <button type="submit">إنشاء تذكير بالدعاء</button>
            <p class="privacy-note">لا نقوم بحفظ بياناتك، جميع المعلومات تبقى على جهازك.</p>
            <p class="success-message" id="successMessage"></p>
          </div>
        </form>
      </section>

      <aside class="card">
        <h2>معاينة التذكير</h2>
        <div class="preview-card" id="previewCard">
          <div class="preview-body">
            <p>السلام عليكم ورحمة الله وبركاته،</p>
            <p>لا تنسوا الدعاء للمرحوم <strong data-preview-name>اسم الميت</strong> بالرحمة والمغفرة وأن يجعل الله قبره روضة من رياض الجنة.</p>
            <p>﴿ رَبَّنَا اغْفِرْ لَنَا وَلِإِخْوَانِنَا الَّذِينَ سَبَقُونَا بِالْإِيمَانِ ﴾</p>
            <p class="contact-hint">
              سيتم إرسال التذكير عبر <strong data-preview-method>واتساب</strong> إلى
              <span data-preview-contact>رقم المستلم</span>
            </p>
          </div>
        </div>

        <div class="tips">
          <div class="tip">
            <strong>نصيحة:</strong>
            اختر أوقاتاً ثابتة أسبوعية أو في المناسبات الخاصة لتجديد الدعاء.
          </div>
          <div class="tip">
            <strong>الدعاء المشترك:</strong>
            شارك التذكير مع أكثر من شخص ليجتمع الدعاء وتكثر الحسنات.
          </div>
          <div class="tip">
            <strong>تخصيص الرسالة:</strong>
            يمكنك تعديل نص الدعاء بما يناسب ذوق العائلة والأصدقاء.
          </div>
        </div>
      </aside>
    </main>
  </div>

  <script>
    const form = document.getElementById("reminderForm");
    const methodRadios = Array.from(document.querySelectorAll('input[name="reminderMethod"]'));
    const contactFields = Array.from(document.querySelectorAll(".contact-field"));
    const previewCard = document.getElementById("previewCard");
    const previewName = document.querySelector("[data-preview-name]");
    const previewMethod = document.querySelector("[data-preview-method]");
    const previewContact = document.querySelector("[data-preview-contact]");
    const successMessage = document.getElementById("successMessage");
    const whatsappInput = document.getElementById("whatsappNumber");
    const countrySelect = document.getElementById("countryCode");

    const countries = [
      { iso2: "SA", name: "المملكة العربية السعودية", dialCode: "+966" },
      { iso2: "AE", name: "الإمارات العربية المتحدة", dialCode: "+971" },
      { iso2: "KW", name: "الكويت", dialCode: "+965" },
      { iso2: "QA", name: "قطر", dialCode: "+974" },
      { iso2: "BH", name: "البحرين", dialCode: "+973" },
      { iso2: "OM", name: "عُمان", dialCode: "+968" },
      { iso2: "JO", name: "الأردن", dialCode: "+962" },
      { iso2: "PS", name: "فلسطين", dialCode: "+970" },
      { iso2: "EG", name: "مصر", dialCode: "+20" },
      { iso2: "IQ", name: "العراق", dialCode: "+964" },
      { iso2: "SY", name: "سوريا", dialCode: "+963" },
      { iso2: "LB", name: "لبنان", dialCode: "+961" },
      { iso2: "YE", name: "اليمن", dialCode: "+967" },
      { iso2: "SD", name: "السودان", dialCode: "+249" },
      { iso2: "LY", name: "ليبيا", dialCode: "+218" },
      { iso2: "TN", name: "تونس", dialCode: "+216" },
      { iso2: "DZ", name: "الجزائر", dialCode: "+213" },
      { iso2: "MA", name: "المغرب", dialCode: "+212" },
      { iso2: "TR", name: "تركيا", dialCode: "+90" },
      { iso2: "PK", name: "باكستان", dialCode: "+92" },
      { iso2: "IN", name: "الهند", dialCode: "+91" },
      { iso2: "ID", name: "إندونيسيا", dialCode: "+62" },
      { iso2: "US", name: "الولايات المتحدة الأمريكية", dialCode: "+1" },
      { iso2: "GB", name: "المملكة المتحدة", dialCode: "+44" },
      { iso2: "FR", name: "فرنسا", dialCode: "+33" },
      { iso2: "DE", name: "ألمانيا", dialCode: "+49" }
    ];

    let isApplyingDialCode = false;

    function detectCountryByLocale() {
      const candidates = [
        ...(navigator.languages || []),
        navigator.language,
        Intl.DateTimeFormat().resolvedOptions().locale
      ].filter(Boolean);
      const regions = candidates
        .map((locale) => locale.replace("_", "-"))
        .map((locale) => locale.split("-").pop())
        .filter(Boolean)
        .map((code) => code.toUpperCase());
      return countries.find((country) => regions.includes(country.iso2));
    }

    function populateCountryOptions() {
      if (!countrySelect) return;
      countrySelect.innerHTML =
        '<option value="" disabled>اختر الدولة</option>' +
        countries
          .map(
            (country) =>
              `<option value="${country.dialCode}" data-iso="${country.iso2}">${country.name} (${country.dialCode})</option>`
          )
          .join("");
      const detected = detectCountryByLocale();
      if (detected) {
        countrySelect.value = detected.dialCode;
      }
      if (!countrySelect.value && countries.length) {
        countrySelect.value = countries[0].dialCode;
      }
      updateDialCodePlaceholder();
    }

    function extractLocalNumber(rawValue, dialCode) {
      if (!rawValue) return "";
      let cleaned = rawValue.replace(/\s+/g, " ").trim();
      if (!dialCode) return cleaned;

      const plainDial = dialCode.replace("+", "");
      const zeroDial = `00${plainDial}`;

      if (cleaned.startsWith(dialCode)) {
        cleaned = cleaned.slice(dialCode.length).trimStart();
      } else if (cleaned.startsWith(zeroDial)) {
        cleaned = cleaned.slice(zeroDial.length).trimStart();
      } else if (cleaned.startsWith(plainDial)) {
        cleaned = cleaned.slice(plainDial.length).trimStart();
      }
      return cleaned;
    }

    function syncLocalNumberFromInput(dialOverride) {
      if (!whatsappInput) return "";
      const dialCode = dialOverride || whatsappInput.dataset.lastDialCode || countrySelect?.value || "";
      const localNumber = extractLocalNumber(whatsappInput.value, dialCode);
      whatsappInput.dataset.localNumber = localNumber;
      return localNumber;
    }

    function updateDialCodePlaceholder() {
      if (!whatsappInput) return;
      const dialCode = countrySelect?.value || "+966";
      whatsappInput.placeholder = `${dialCode} 5XXXXXXX`;
    }

    function applyDialCode(force = false) {
      if (!whatsappInput || !countrySelect) return;
      if ((form.elements.reminderMethod?.value || "whatsapp") !== "whatsapp") return;

      const dialCode = countrySelect.value;
      if (!dialCode) return;

      if (force || typeof whatsappInput.dataset.localNumber === "undefined") {
        syncLocalNumberFromInput();
      }

      let localNumber = (whatsappInput.dataset.localNumber || "").replace(/\s+/g, " ").trim();
      localNumber = localNumber.replace(/^\+/, "");
      if (localNumber.startsWith("0")) {
        localNumber = localNumber.replace(/^0+/, "");
      }

      isApplyingDialCode = true;
      const needsSpace = document.activeElement === whatsappInput || Boolean(localNumber);
      const formatted = needsSpace
        ? `${dialCode}${localNumber ? " " + localNumber : " "}`
        : dialCode;
      whatsappInput.value = formatted;
      whatsappInput.dataset.lastDialCode = dialCode;
      isApplyingDialCode = false;
      updatePreview();
    }

    function moveCaretToEnd(input) {
      if (!input || typeof input.setSelectionRange !== "function") return;
      requestAnimationFrame(() => {
        const length = input.value.length;
        input.setSelectionRange(length, length);
      });
    }

    function toggleContactField(selectedMethod) {
      contactFields.forEach((field) => {
        const isMatch = field.dataset.method === selectedMethod;
        field.hidden = !isMatch;
        const inputs = field.querySelectorAll("input");
        inputs.forEach((input) => {
          input.required = isMatch;
          if (!isMatch) {
            input.value = "";
            if (input === whatsappInput) {
              whatsappInput.dataset.localNumber = "";
              whatsappInput.dataset.lastDialCode = countrySelect?.value || "";
            }
          }
        });
      });

      if (selectedMethod === "whatsapp") {
        countrySelect?.removeAttribute("disabled");
        updateDialCodePlaceholder();
        if (whatsappInput && whatsappInput.value.trim()) {
          applyDialCode();
        }
      } else {
        countrySelect?.setAttribute("disabled", "disabled");
      }
    }

    function updatePreview() {
      const nameInput = document.getElementById("deceasedName");
      const activeMethod = methodRadios.find((radio) => radio.checked)?.value || "whatsapp";
      const contactInput = document.querySelector(`.contact-field[data-method="${activeMethod}"] input`);

      previewName.textContent = nameInput.value.trim() || "اسم الميت";
      previewMethod.textContent = activeMethod === "whatsapp" ? "واتساب" : "تيليجرام";
      previewContact.textContent =
        contactInput?.value.trim() || (activeMethod === "whatsapp" ? "رقم المستلم" : "@username");
    }

    methodRadios.forEach((radio) => {
      radio.addEventListener("change", () => {
        toggleContactField(radio.value);
        updatePreview();
      });
    });

    form.addEventListener("input", (event) => {
      if (event.target !== whatsappInput) {
        updatePreview();
      }
    });

    countrySelect?.addEventListener("change", () => {
      const previousDial = whatsappInput?.dataset.lastDialCode || "";
      if (whatsappInput) {
        whatsappInput.dataset.localNumber = extractLocalNumber(whatsappInput.value, previousDial);
      }
      updateDialCodePlaceholder();
      applyDialCode(true);
      if (document.activeElement === whatsappInput) {
        moveCaretToEnd(whatsappInput);
      }
    });

    whatsappInput?.addEventListener("focus", () => {
      updateDialCodePlaceholder();
      const currentDial = countrySelect?.value || "";
      const trimmedValue = whatsappInput.value.trim();
      if (!trimmedValue || trimmedValue === currentDial) {
        applyDialCode(true);
      }
      moveCaretToEnd(whatsappInput);
    });

    whatsappInput?.addEventListener("input", () => {
      if (isApplyingDialCode) return;
      syncLocalNumberFromInput();
      whatsappInput.dataset.userEdited = "true";
      updatePreview();
    });

    whatsappInput?.addEventListener("blur", () => {
      applyDialCode();
    });

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      successMessage.textContent = "تم إنشاء التذكير بنجاح! يمكنك الآن نسخ الرسالة وإرسالها لمن تحب.";
      successMessage.classList.add("visible");
      previewCard.classList.add("visible");
    });

    populateCountryOptions();
    toggleContactField(form.elements.reminderMethod.value || "whatsapp");
    updatePreview();
  </script>
</body>
</html>
